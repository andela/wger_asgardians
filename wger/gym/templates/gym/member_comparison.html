{% extends "base.html" %}
{% load i18n staticfiles wger_extras django_bootstrap_breadcrumbs %}

{% block title %}<h4>{% trans "Members Comparison" %}</h4>
{% endblock %}

{% block header %}
<script src="{% static 'js/weight_comparison.js' %}"></script>
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% if perms.gym.manage_gyms %}
        {% breadcrumb "Gyms" "gym:gym:list" %}
        {% breadcrumb_raw gym "gym:gym:user-list" gym.pk %}
        {% breadcrumb_raw name "gym:gym:member-comparison" %}
    {% endif %}
{% endblock %}


{% block sidebar %}

 <link rel="stylesheet" type="text/css" href="{% static 'bower_components/datatables/media/css/dataTables.bootstrap.min.css' %}">
 <script src="{% static 'bower_components/datatables/media/js/jquery.dataTables.min.js' %}" ></script>
 <script src="{% static 'bower_components/datatables/media/js/dataTables.bootstrap.min.js' %}" ></script>
 <script>
 $(document).ready( function () {
     /* Make table sortable */
     $('#main_member_list').DataTable({
         paging: false,
         bFilter: true,
         bInfo : false
     });
 });

 $(document).on('click','#member_row',function(){
    var atLeastTwoChecked = $('#selected_member:checked').length > 1;
    var row = $(this).closest('#member_row');
    var user_id = row.find('td:first').text();
//     var user_id = $('row td:eq(0)').text();
//    alert(user_id);

    if (atLeastTwoChecked) {
        alert('Come on!');
        $('.compare_button').removeClass('disabled');
        $('#graphs').removeClass('disabled');
        $(atLeastTwoChecked).val(html);
        selected.push($(ob).val());
    }
    else {
        $('.compare_button').addClass('disabled');
        }
});
 </script>

 <a href="{% url 'gym:gym:member-comparison' gym.pk %}"
    class="btn btn-success btn-sm pull-left compare_button disabled">
     {% trans "Compare Selected Members" %}
</a>

 <table class="table table-hover" id="main_member_list">
 <thead>
 <tr>
     {% for key in user_table.keys %}
        <th>{{ key }}</th>

    {% endfor %}
 </tr>
 </thead>
 <tbody>
{% for u in members.users %}
     {% if u.obj.is_active %}
        {% for m in members.members %}
            {% if m.user_id = u.obj.pk %}

             <tr id="member_row" data-membersdata =
             "{{ m.age  }}">
                 {% endif %}
                 {% endfor %}
             <td>
                 {{ u.obj.pk }}
             </td>
             <td>
                    <a href="{% url 'core:user:overview' u.obj.pk %}">{{u.obj}}</a>
             </td>
             <td>
                 <input type="checkbox" id="selected_member">
             </td>
         </tr>
     {% endif %}
 {% endfor %}
 </tbody>
 </table>


{% endblock %}

{% block content %}
<div id="weight_comparison"></div>

{% endblock %}
